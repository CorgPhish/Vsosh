# Инструкция по реструктуризации проекта CorgPhish

## Шаги по реструктуризации

### 1. Удаление дублирующейся структуры

В настоящий момент в проекте существует дублирование файлов в директориях `src/model` и `src/extension`. Для упрощения структуры необходимо:

1. Удалить директорию `src/model` и использовать только `src/extension`.
2. Убедиться, что все необходимые файлы перенесены из `src/model` в `src/extension`.

### 2. Создание общей директории для компонентов

Создать директорию `src/common` для размещения общих компонентов:

```
src/common/
├── classifier/    # Код классификатора
├── dataset/       # Датасеты для обучения
└── utilities/     # Общие утилиты
```

### 3. Перенос файлов в соответствующие директории

1. Перенести файлы из `src/model/classifier` в `src/common/classifier`
2. Перенести файлы из `src/model/dataset` в `src/common/dataset`
3. Перенести файлы из `src/model/utilities` в `src/common/utilities`
4. Перенести `export_model.py` из `src/model` в `src/common`

### 4. Обновление скриптов сборки

Внести изменения в скрипт сборки `build.py`:

```python
# Заменить пути директорий
SRC_DIR = "src"
DIST_DIR = "dist"
EXTENSION_SRC = os.path.join(SRC_DIR, "extension")
EXTENSION_DIST = os.path.join(DIST_DIR, "browser_extension")
COMMON_SRC = os.path.join(SRC_DIR, "common")  # Новая переменная для общих компонентов
MODEL_TRAINING_DIST = os.path.join(DIST_DIR, "model_training")
DOCS_DIR = "docs"
```

### 5. Проверка корректности манифеста

Убедиться, что `manifest.json` в `src/extension` содержит корректные пути ко всем файлам расширения:

1. Проверить пути к скриптам
2. Проверить пути к HTML и CSS файлам
3. Проверить пути к иконкам

### 6. Обновление документации

1. Обновить README.md с учетом новой структуры проекта
2. Обновить CONTRIBUTING.md с инструкциями для разработчиков

## Итоговая структура проекта

После выполнения всех шагов проект должен иметь следующую структуру:

```
CorgPhish/
├── src/
│   ├── extension/        # Основная директория расширения
│   │   ├── css/          # CSS стили
│   │   ├── html/         # HTML файлы интерфейса
│   │   │   ├── about.html
│   │   │   ├── popup.html
│   │   │   └── warning.html
│   │   ├── icons/        # Иконки расширения
│   │   ├── images/       # Изображения для интерфейса
│   │   ├── js/           # JavaScript файлы
│   │   │   ├── content.js
│   │   │   ├── popup.js
│   │   │   ├── service-worker.js
│   │   │   ├── settings.js
│   │   │   ├── models/   # Файлы моделей ML
│   │   │   └── utils/    # Вспомогательные утилиты
│   │   └── manifest.json # Манифест расширения
│   └── common/           # Общие компоненты
│       ├── classifier/    # Код классификатора
│       ├── dataset/       # Датасеты для обучения
│       ├── utilities/     # Общие утилиты
│       └── export_model.py # Скрипт экспорта модели
├── dist/                 # Директория для сборки (создается автоматически)
│   ├── browser_extension/ # Готовое расширение
│   └── model_training/   # Инструменты для обучения модели
├── docs/                 # Документация
├── phishing_demo/        # Демонстрационные примеры
├── artifacts/            # Артефакты сборки
├── build.py              # Скрипт сборки
├── test_model.js         # Скрипт тестирования модели
├── migrate.py            # Скрипт миграции
├── README.md             # Общее описание проекта
├── RESTRUCTURE.md        # Инструкция по реструктуризации
├── LICENSE.md            # Лицензия
├── CHANGELOG.md          # История изменений
└── CONTRIBUTING.md       # Информация для контрибьюторов
```

## Тестирование после реструктуризации

После завершения всех шагов по реструктуризации необходимо выполнить тестирование:

1. Запустить сборку проекта: `python build.py`
2. Установить расширение в браузер из директории `dist/browser_extension`
3. Проверить работоспособность основных функций расширения
4. Проверить корректность запуска инструментов для обучения модели

## Рекомендации по дальнейшему улучшению

1. Добавить автоматические тесты для проверки работоспособности
2. Улучшить документацию с подробным описанием каждого компонента
3. Добавить логирование ошибок для облегчения отладки
4. Рассмотреть возможность внедрения системы непрерывной интеграции 