# CorgPhish: Полная документация проекта

## Содержание
1. [Обзор проекта](#обзор-проекта)
2. [Структура проекта](#структура-проекта)
3. [Компоненты системы](#компоненты-системы)
4. [Модель машинного обучения](#модель-машинного-обучения)
5. [Данные для обучения](#данные-для-обучения)
6. [Расширение для браузера](#расширение-для-браузера)
7. [Сборка проекта](#сборка-проекта)
8. [Демонстрационная среда](#демонстрационная-среда)
9. [Инструменты разработки](#инструменты-разработки)
10. [Планы развития](#планы-развития)

## Обзор проекта

CorgPhish — это интеллектуальная система защиты от фишинга, реализованная в виде расширения для браузера. Система использует модели машинного обучения для анализа веб-страниц в режиме реального времени и обнаружения потенциальных фишинговых сайтов.

Ключевые особенности:
- Автономная работа без отправки данных на сервер
- Анализ более 50 признаков фишинга
- Высокая точность обнаружения (97.2%)
- Низкое потребление ресурсов
- Интеграция с Google Safe Browsing API

## Структура проекта

Проект организован в следующую структуру директорий:

```
CorgPhish/
├── src/                  # Исходный код
│   ├── extension/        # Код расширения для браузера
│   │   ├── css/          # CSS стили
│   │   ├── html/         # HTML файлы интерфейса
│   │   ├── icons/        # Иконки расширения
│   │   ├── images/       # Изображения 
│   │   ├── js/           # JavaScript файлы
│   │   │   ├── models/   # JavaScript модели ML
│   │   │   └── utils/    # Вспомогательные утилиты
│   │   └── manifest.json # Манифест расширения
│   ├── common/           # Общие компоненты
│   │   ├── classifier/   # Классификаторы ML
│   │   ├── dataset/      # Данные для обучения
│   │   └── utils/        # Общие утилиты
│   └── frontend/         # Код для веб-интерфейса
├── dist/                 # Собранные файлы
│   ├── browser_extension/  # Готовое расширение
│   └── model_training/   # Инструменты для обучения
├── docs/                 # Документация
├── tests/                # Тесты
├── scripts/              # Вспомогательные скрипты
├── phishing_demo/        # Демонстрационная среда
├── build/                # Временные файлы сборки
├── build.py              # Скрипт сборки
├── requirements.txt      # Зависимости Python
├── README.md             # Основное описание
└── LICENSE.md            # Лицензия
```

## Компоненты системы

### Модуль фронтенда (src/extension)
- **HTML интерфейс**: всплывающие окна, страницы предупреждений
- **JavaScript логика**: обработка событий, взаимодействие с DOM
- **CSS стили**: дизайн интерфейса
- **Манифест расширения**: конфигурация расширения

### Модуль машинного обучения (src/common)
- **Классификаторы**: модели ML для обнаружения фишинга
- **Утилиты экспорта**: экспорт моделей в JavaScript
- **Предобработка данных**: подготовка данных для обучения

### Демонстрационная среда (phishing_demo)
- **Фейковые сайты**: примеры фишинговых сайтов
- **Настройка окружения**: сервер для тестирования
- **Инструкции**: руководство по использованию демо

## Модель машинного обучения

### Используемые алгоритмы
- **XGBoost**: основная модель с наилучшими результатами
- **RandomForest**: альтернативная модель
- **Гиперпараметры XGBoost**:
  - max_depth: 6
  - learning_rate: 0.1
  - n_estimators: 100
  - objective: 'binary:logistic'

### Метрики эффективности
- **Точность (Accuracy)**: 97.2%
- **Precision**: 96.5%
- **Recall**: 95.8%
- **F1-Score**: 96.1%
- **ROC AUC**: 0.981

### Процесс обучения
1. Загрузка и предобработка данных
2. Извлечение признаков
3. Разделение на обучающую и тестовую выборки
4. Обучение модели
5. Оценка на тестовых данных
6. Экспорт модели в JavaScript

## Данные для обучения

### Источники данных
- **Легитимные URL**: Alexa Top 10,000 сайтов
- **Фишинговые URL**: PhishTank, OpenPhish, собственная коллекция
- **Дополнительные источники**: Common Crawl, APWG

### Признаки для классификации
Всего используется более 50 признаков, включая:

#### URL-признаки:
- Длина URL
- Количество поддоменов
- Наличие спецсимволов
- Использование IP-адреса вместо домена
- Возраст домена
- Наличие ключевых слов-индикаторов

#### HTML-признаки:
- Количество внешних ссылок
- Наличие форм с полями для пароля
- Соотношение внешних и внутренних ссылок
- Наличие перенаправлений
- Наличие скрытых элементов
- Использование iframe

#### Дополнительные признаки:
- SSL-сертификат и его валидность
- WHOIS-информация
- Наличие доверенных логотипов
- Анализ CSS-селекторов

### Формат данных
Данные хранятся в формате JSON с примерной структурой:
```json
{
  "url": "https://example.com",
  "is_phishing": 0,
  "features": {
    "url_length": 18,
    "has_ip_address": 0,
    "has_at_symbol": 0,
    "has_multiple_subdomains": 0,
    "has_suspicious_tld": 0,
    "...": "..."
  },
  "html_features": {
    "form_count": 1,
    "password_inputs": 0,
    "external_links_ratio": 0.2,
    "...": "..."
  }
}
```

## Расширение для браузера

### Функциональность
- **Автоматический анализ** посещаемых страниц
- **Визуальные предупреждения** о потенциальных угрозах
- **Подробная информация** о факторах риска
- **Настройки пользователя** для конфигурации поведения
- **Интеграция с API** для дополнительной проверки

### Архитектура расширения
- **content.js**: анализирует DOM страницы
- **service-worker.js**: фоновые процессы и обработка событий
- **popup.js**: управление пользовательским интерфейсом
- **models/xgboost_model.js**: ML-модель в JavaScript
- **utils/**: вспомогательные функции

### События и состояния
1. **Загрузка страницы**: инициирует анализ
2. **Анализ завершен**: отображение результата
3. **Предупреждение**: пользователю показано уведомление
4. **Пользовательские действия**: ответ на предупреждение

## Сборка проекта

### Процесс сборки (build.py)
1. **Подготовка модели**: экспорт ML-модели в JavaScript
2. **Копирование файлов**: сборка расширения
3. **Создание инструментов**: для обучения модели
4. **Копирование документации**: в директорию dist

### Процесс экспорта модели (export_model.py)
1. Загрузка обученной модели из pickle-файла
2. Преобразование в JavaScript код
3. Оптимизация размера и производительности
4. Сохранение в виде JavaScript модуля

## Демонстрационная среда

### Структура демо (phishing_demo)
- **fake_sites/**: примеры фишинговых сайтов
- **server/**: веб-сервер для запуска примеров
- **tools/**: инструменты для создания и администрирования демо

### Запуск демо-среды
```bash
cd phishing_demo
bash run_demo.sh
```

После запуска демо-сервер будет доступен по адресу: `http://localhost:3000`

### Пример использования
1. Запустите демо-сервер
2. Установите расширение в браузер
3. Перейдите на одну из демо-страниц
4. Наблюдайте за реакцией расширения

## Инструменты разработки

### Среда разработки
- **Языки программирования**: JavaScript, Python, HTML, CSS
- **Фреймворки и библиотеки**: TensorFlow, XGBoost, jQuery
- **Инструменты сборки**: custom build.py

### Тестирование
- **Unit тесты**: проверка отдельных компонентов
- **Интеграционные тесты**: проверка взаимодействия компонентов
- **UI тесты**: проверка пользовательского интерфейса
- **Тестирование на реальных данных**: проверка на живых примерах

### Непрерывная интеграция
- **GitHub Actions**: автоматизация тестирования и сборки
- **Code Quality**: проверка качества кода
- **Coverage**: измерение покрытия тестами

## Планы развития

### Краткосрочные планы
- Оптимизация производительности модели
- Улучшение пользовательского интерфейса
- Исправление ошибок и улучшение стабильности

### Среднесрочные планы
- Расширение функциональности
- Добавление сбора обратной связи от пользователей
- Интеграция с дополнительными API для улучшения точности

### Долгосрочные планы
- Создание централизованной базы данных фишинговых образцов
- Разработка API для сторонних приложений
- Расширение на мобильные устройства 