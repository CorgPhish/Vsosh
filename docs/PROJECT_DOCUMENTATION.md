# CorgPhish: Полная документация проекта

## Содержание
1. [Обзор проекта](#обзор-проекта)
2. [Структура проекта](#структура-проекта)
3. [Компоненты системы](#компоненты-системы)
4. [Модель машинного обучения](#модель-машинного-обучения)
5. [Данные для обучения](#данные-для-обучения)
6. [Расширение для браузера](#расширение-для-браузера)
7. [Сборка проекта](#сборка-проекта)
8. [Демонстрационная среда](#демонстрационная-среда)
9. [Инструменты разработки](#инструменты-разработки)
10. [Планы развития](#планы-развития)

## Обзор проекта

CorgPhish — это интеллектуальная система защиты от фишинга, реализованная в виде расширения для браузера. Система использует модели машинного обучения для анализа веб-страниц в режиме реального времени и обнаружения потенциальных фишинговых сайтов.

Ключевые особенности:
- Автономная работа без отправки данных на сервер
- Анализ более 50 признаков фишинга
- Высокая точность обнаружения (97.2%)
- Низкое потребление ресурсов
- Интеграция с Google Safe Browsing API

## Структура проекта

Проект организован в следующую структуру директорий:

```
CorgPhish/
├── src/                  # Исходный код
│   ├── extension/        # Код расширения для браузера
│   │   ├── css/          # CSS стили
│   │   ├── html/         # HTML файлы интерфейса
│   │   ├── icons/        # Иконки расширения
│   │   ├── images/       # Изображения 
│   │   ├── js/           # JavaScript файлы
│   │   │   ├── models/   # JavaScript модели ML
│   │   │   └── utils/    # Вспомогательные утилиты
│   │   └── manifest.json # Манифест расширения
│   └── common/           # Общие компоненты
│       ├── classifier/   # Классификаторы ML
│       ├── dataset/      # Данные для обучения
│       └── utilities/    # Общие утилиты
├── dist/                 # Собранные файлы
│   ├── browser_extension/  # Готовое расширение
│   └── model_training/   # Инструменты для обучения
├── docs/                 # Документация
├── tests/                # Тесты
├── scripts/              # Вспомогательные скрипты
├── phishing_demo/        # Демонстрационная среда
├── artifacts/            # Артефакты проекта
├── build.py              # Скрипт сборки
├── migrate.py            # Скрипт миграции данных
├── restructure.py        # Скрипт реструктуризации
├── requirements.txt      # Зависимости Python
├── README.md             # Основное описание
├── RESTRUCTURE.md        # Инструкция по реструктуризации
└── LICENSE.md            # Лицензия
```

## Компоненты системы

### Модуль фронтенда (src/extension)
- **HTML интерфейс**: всплывающие окна, страницы предупреждений
- **JavaScript логика**: обработка событий, взаимодействие с DOM
- **CSS стили**: дизайн интерфейса
- **Манифест расширения**: конфигурация расширения

### Модуль машинного обучения (src/common)
- **Классификаторы**: модели ML для обнаружения фишинга
- **Утилиты экспорта**: экспорт моделей в JavaScript
- **Предобработка данных**: подготовка данных для обучения

### Демонстрационная среда (phishing_demo)
- **Фейковые сайты**: примеры фишинговых сайтов
- **Настройка окружения**: сервер для тестирования
- **Инструкции**: руководство по использованию демо

## Модель машинного обучения

### Используемые алгоритмы
- **XGBoost**: основная модель с наилучшими результатами
- **RandomForest**: альтернативная модель
- **Гиперпараметры XGBoost**:
  - max_depth: 6
  - learning_rate: 0.1
  - n_estimators: 100
  - objective: 'binary:logistic'

### Метрики эффективности
- **Точность (Accuracy)**: 97.2%
- **Precision**: 96.5%
- **Recall**: 95.8%
- **F1-Score**: 96.1%
- **ROC AUC**: 0.981

### Процесс обучения
1. Загрузка и предобработка данных
2. Извлечение признаков
3. Разделение на обучающую и тестовую выборки
4. Обучение модели
5. Оценка на тестовых данных
6. Экспорт модели в JavaScript

## Данные для обучения

### Источники данных
- **Легитимные URL**: Alexa Top 10,000 сайтов
- **Фишинговые URL**: PhishTank, OpenPhish, собственная коллекция
- **Дополнительные источники**: Common Crawl, APWG

### Признаки для классификации
Всего используется более 50 признаков, включая:

#### URL-признаки:
- Длина URL
- Количество поддоменов
- Наличие спецсимволов
- Использование IP-адреса вместо домена
- Возраст домена
- Наличие ключевых слов-индикаторов

#### HTML-признаки:
- Количество внешних ссылок
- Наличие форм с полями для пароля
- Соотношение внешних и внутренних ссылок
- Наличие перенаправлений
- Наличие скрытых элементов
- Использование iframe

#### Дополнительные признаки:
- SSL-сертификат и его валидность
- WHOIS-информация
- Наличие доверенных логотипов
- Анализ CSS-селекторов

### Формат данных
Данные хранятся в формате JSON с примерной структурой:
```json
{
  "url": "https://example.com",
  "is_phishing": 0,
  "features": {
    "url_length": 18,
    "has_ip_address": 0,
    "has_at_symbol": 0,
    "has_multiple_subdomains": 0,
    "has_suspicious_tld": 0,
    "...": "..."
  },
  "html_features": {
    "form_count": 1,
    "password_inputs": 0,
    "external_links_ratio": 0.2,
    "...": "..."
  }
}
```

## Расширение для браузера

### Функциональность
- **Автоматический анализ** посещаемых страниц
- **Визуальные предупреждения** о потенциальных угрозах
- **Подробная информация** о факторах риска
- **Настройки пользователя** для конфигурации поведения
- **Интеграция с API** для дополнительной проверки

### Архитектура расширения
- **content.js**: анализирует DOM страницы
- **service-worker.js**: фоновые процессы и обработка событий
- **popup.js**: управление пользовательским интерфейсом
- **models/xgboost_model.js**: ML-модель в JavaScript
- **utils/**: вспомогательные функции

### События и состояния
1. **Загрузка страницы**: инициирует анализ
2. **Анализ завершен**: отображение результата
3. **Предупреждение**: пользователю показано уведомление
4. **Пользовательские действия**: ответ на предупреждение

## Сборка проекта

### Процесс сборки (build.py)
1. **Подготовка модели**: экспорт ML-модели в JavaScript
2. **Копирование файлов**: сборка расширения
3. **Создание инструментов**: для обучения модели
4. **Копирование документации**: в директорию dist

### Процесс экспорта модели (export_model.py)
1. Загрузка обученной модели из pickle-файла
2. Преобразование в JavaScript код
3. Оптимизация размера и производительности
4. Сохранение в виде JavaScript модуля

## Демонстрационная среда

### Структура демо (phishing_demo)
- **run_demo.sh**: запуск демо-сервера
- **stop_demo.sh**: остановка сервера
- **phishing_samples/**: примеры фишинговых сайтов
- **legitimate_samples/**: примеры легитимных сайтов

### Запуск демонстрации
```bash
cd phishing_demo
bash run_demo.sh
```

Демонстрационный сервер будет доступен по адресу: `http://localhost:3000`

## Инструменты разработки

### Используемые технологии
- **Frontend**: JavaScript (ES6+), HTML5, CSS3
- **Machine Learning**: Python, XGBoost, Scikit-learn
- **Разработка расширений**: Chrome Extensions API, Firefox Add-ons API
- **Тестирование**: Jest, Pytest
- **Сборка**: Python-скрипты

### Скрипты разработки
- **build.py**: сборка проекта
- **migrate.py**: миграция данных между версиями
- **restructure.py**: реорганизация структуры проекта
- **scripts/cleanup.py**: очистка проекта от временных файлов

## Планы развития

### Последние обновления
- ✅ Добавлен режим "Глубокого сканирования" для более тщательного анализа страниц
- ✅ Улучшена интеграция с Google Safe Browsing API, включая визуальные индикаторы статуса
- ✅ Добавлена вкладка "Аналитика" с графиками и статистикой обнаружений
- ✅ Переработан интерфейс настроек для улучшения пользовательского опыта
- ✅ Реализована функция обновления модели машинного обучения

### Ближайшие обновления
- Добавление истории проверок с возможностью просмотра и экспорта
- Создание централизованной базы данных фишинговых образцов
- Расширение возможностей аналитики с географической статистикой
- Локализация интерфейса на дополнительные языки

### Долгосрочные планы
- Добавление облачного API для обновления моделей
- Адаптивное обучение на основе обратной связи пользователей
- Расширенные настройки для продвинутых пользователей
- Версия для мобильных браузеров 

## Подготовка к публикации

### Подготовка GitHub репозитория
- **Очистка кода**: удаление временных файлов и отладочного кода
- **Обновление документации**: проверка актуальности всех инструкций
- **Структура релизов**: архивы релизов хранятся в директории `releases/`
- **Версионирование**: актуальная версия указана в файле `docs/VERSION`

### Чеклист перед публикацией
1. Проверить корректность всех ссылок в документации
2. Обновить информацию о версии во всех файлах
3. Убедиться в отсутствии чувствительных данных в коде
4. Проверить работоспособность скриптов сборки
5. Создать релиз на GitHub с подробным описанием изменений

### Процесс создания релиза
```bash
# Сборка проекта
python3 build.py

# Архивация файлов
cd dist
zip -r ../releases/CorgPhish-v{VERSION}.zip browser_extension/
zip -r ../releases/CorgPhish-user-v{VERSION}.zip browser_extension/

# Публикация релиза на GitHub
gh release create v{VERSION} ../releases/CorgPhish-v{VERSION}.zip -t "CorgPhish v{VERSION}" -F ../docs/RELEASE_NOTES.md
```

### Поддержка репозитория
- Регулярное обновление зависимостей
- Документирование всех изменений в CHANGELOG.md
- Ответы на issues и pull requests в течение 1-2 недель
- Тестирование на различных платформах перед выпуском релизов 